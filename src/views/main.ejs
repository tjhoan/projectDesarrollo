<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Urban Street</title>
    <link rel="stylesheet" href="../public/css/mainStyles.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  </head>
  <body>
    <header>
      <nav class="top-nav">
        <ul>
          <li><a class="titulo" href="/">URBAN STREET</a></li>
          <div class="icon-container">
            <li>
              <button id="cartBtn" class="icon-btn">
                <i class="fas fa-shopping-cart"></i>
              </button>
            </li>
            <li>
              <button id="userBtn" class="icon-btn">
                <i class="fas fa-user-plus"></i>
              </button>
            </li>
            <li>
              <a href="/logout" style="padding: 0">
                <button class="icon-btn">
                  <i class="fas fa-sign-out-alt"></i>
                </button>
              </a>
            </li>
          </div>
        </ul>
      </nav>
      <!-- Ventana emergente para el carrito -->
      <div id="cartModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>Contenido del carrito</h2>
          <div class="cart-items">
            <% productCart.forEach(item => { %>
            <div class="cart-item">
              <!-- <img src="product-image.jpg" alt="Producto" class="product-image-cart" /> -->
              <div class="product-info">
                <p class="product-name"><%= item.details.name %></p>
                <p class="product-price">$<%= item.details.price %></p>
                <p class="product-quantity">Cantidad: <%= item.quantity %></p>
              </div>
              <span class="remove-item">&times;</span>
            </div>
            <% }) %>
            <div class="btn-cart">
              <button class="Finalizar-cart">Finalizar Compra</button>
              <button class="Main-cart">Main</button>
            </div>
            <!-- Puedes duplicar el div cart-item para más productos -->
          </div>
        </div>
      </div>

      <!-- Ventana emergente para el usuario -->
      <div id="userModal" class="modal">
        <div class="modal-content">
          <span class="close">&times;</span>
          <h2>LOGIN CLIENTE</h2>
          <form class="DatosLogin" action="/form-login-cliente" method="post">
            <label for="NomCliente">Primer Nombre</label>
            <input type="text" name="first_name" class="input-field" placeholder="Ingrese su nombre" />
            <label for="CorreoCliente">Correo</label>
            <input type="email" name="email_Customer" class="input-field" placeholder="Ingrese su correo" />
            <label for="ContrCliente">Cédula</label>
            <input type="text" name="cedula_Customer" class="input-field" placeholder="Ingrese su cédula" />
            <button class="register-btn" type="submit">Registrar</button>
            <div id="error-message" class="error-message"></div>
          </form>

          <form class="DatosAdmin" action="/form-login-admin" method="post">
            <h2>LOGIN ADMINISTRADOR</h2>
            <label for="NomAdmin">Nombre</label>
            <input type="text" name="admin_name" class="input-field" placeholder="Ingrese su nombre" />
            <label for="ContrAdmin">Contraseña</label>
            <input type="password" name="admin_password" class="input-field" placeholder="Ingrese su contraseña" />
            <button class="Ingresar-btn" type="submit">Ingresar</button>
          </form>
        </div>
      </div>

      <nav class="category-nav">
        <ul>
          <li class="dropdown">
            <button class="dropbtn">Camiseta</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Sudadera</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Pantalones</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Sacos</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Gorras</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Ropa Interior</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Lociones</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Accesorios</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Blusas</button>
            <div class="dropdown-content">
              <a href="#">Dama</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Pantalonetas</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Billeteras</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
            </div>
          </li>
          <li class="dropdown">
            <button class="dropbtn">Gafas</button>
            <div class="dropdown-content">
              <a href="#">Hombre</a>
              <a href="#">Dama</a>
            </div>
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <div class="product-grid">
        <% productShow.forEach(product => { %>
        <div class="product-card">
          <h2 class="product-name"><%= product.name %></h2>
          <p class="product-price">$<%= product.price %></p>
          <button class="details-btn" type="button">DETALLES</button>
          <a href="/addCart/<%= product._id %>?customerId=<%= customerId %>" class="add-to-cart-btn">AÑADIR AL CARRITO</a>
        </div>
        <% }) %>
      </div>
    </main>
    <footer>
      <div class="footer-content">
        <a href="https://www.facebook.com/tupagina"><i class="fab fa-facebook"></i></a>
        <a href="https://wa.me/+573146218858?text"><i class="fab fa-whatsapp"></i></a>
        <a href="https://www.instagram.com/urbanstreet737?igsh=MWJ3cWZmZ29sdDczdA=="><i class="fab fa-instagram"></i></a>
        <p>
          Dirección: Carrera 23 # 14-55 / La Unión, Valle del Cauca<br />Numero: +57 3298784556<br />Correo electrónico: urban.street@gmail.com<br />&copy; J.J.L.S - 2024 Tienda Online. Todos los
          derechos reservados.
        </p>
      </div>
    </footer>
    <script>
      // Obtener los elementos del DOM
      var cartModal = document.getElementById("cartModal");
      var userModal = document.getElementById("userModal");

      var cartBtn = document.getElementById("cartBtn");
      cartBtn.onclick = function () {
        cartModal.style.display = "block";
      };

      var userBtn = document.getElementById("userBtn");
      userBtn.onclick = function () {
        userModal.style.display = "block";
      };

      var closeBtns = document.getElementsByClassName("close");
      for (var i = 0; i < closeBtns.length; i++) {
        closeBtns[i].onclick = function () {
          this.parentElement.parentElement.style.display = "none";
        };
      }

      // Cuando el usuario haga clic fuera de las ventanas modales, cerrarlas
      window.onclick = function (event) {
        if (event.target == cartModal) {
          cartModal.style.display = "none";
        } else if (event.target == userModal) {
          userModal.style.display = "none";
        }
      };
    </script>
    <% if (typeof alerta !=='undefined' ) { %> <% console.log(alerta) %>
    <script>
      Swal.fire({
        icon: "error",
        title: "Error",
        text: "<%= alerta %>",
      });
    </script>
    <% } %>
  </body>
</html>
